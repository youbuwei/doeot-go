// Code generated by bizgen; DO NOT EDIT.
package http

import (
	"{{ .ModPath }}/internal/{{ .Module }}/interfaces/endpoint"
	"{{ .ModPath }}/pkg/biz"
	"{{ .ModPath }}/pkg/errs"
	"{{ .ModPath }}/pkg/validate"
)

// RegisterRoutes is generated from endpoint annotations.
func RegisterRoutes(r biz.Router, ep *endpoint.{{ .EndpointType }}) {
{{- range .Endpoints }}
	// {{ .MethodName }}
	r.{{ .HTTPMethod }}("{{ .RoutePath }}", func(ctx biz.Context) error {
		var req endpoint.{{ .MethodName }}Req
		if err := ctx.Bind(&req); err != nil {
			return ctx.Result(nil, errs.BadRequest("invalid request").WithCause(err))
		}
		if err := validate.Struct(&req); err != nil {
			return ctx.Result(nil, err)
		}
		resp, err := ep.{{ .MethodName }}(ctx, &req)
		return ctx.Result(resp, err)
	}{{ if .Options }}, {{ .Options }}{{ end }})
{{- end }}
}
