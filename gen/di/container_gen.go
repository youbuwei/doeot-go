// gen/di/container_gen.go
// Code generated by di-gen; DO NOT EDIT.
package di

import (
	"go.uber.org/dig"

	app "github.com/youbuwei/doeot-go/internal/app"
	"github.com/youbuwei/doeot-go/internal/di"
	infraDB "github.com/youbuwei/doeot-go/internal/infra/db"
	repo "github.com/youbuwei/doeot-go/internal/infra/repo"
	httpiface "github.com/youbuwei/doeot-go/internal/interfaces/http"
	httpHandler "github.com/youbuwei/doeot-go/internal/interfaces/http/handler"
	"github.com/youbuwei/doeot-go/pkg/transport/httpx"
)

// ProvideModules 聚合所有“业务侧”的依赖注入：
// - infra / app / handler 的自动注入
// - 最后调用 di.ProvideManual 做手工扩展
func ProvideModules(c *dig.Container) {
	// --- infra ---
	_ = c.Provide(infraDB.NewGormDB)
	_ = c.Provide(repo.NewOrderRepository)

	// --- app ---
	_ = c.Provide(app.NewOrderService)

	// --- HTTP handlers（group 注入，router 自动收集） ---
	_ = c.Provide(func(svc app.OrderService) httpx.Handler {
		return httpHandler.NewCreateOrderHandler(svc)
	}, dig.Group("http.handlers"))

	_ = c.Provide(func(svc app.OrderService) httpx.Handler {
		return httpHandler.NewGetOrderHandler(svc)
	}, dig.Group("http.handlers"))

	_ = c.Provide(func(svc app.OrderService) httpx.Handler {
		return httpHandler.NewListOrdersHandler(svc)
	}, dig.Group("http.handlers"))

	_ = c.Provide(func(svc app.OrderService) httpx.Handler {
		return httpHandler.NewUpdateOrderHandler(svc)
	}, dig.Group("http.handlers"))

	_ = c.Provide(func(svc app.OrderService) httpx.Handler {
		return httpHandler.NewDeleteOrderHandler(svc)
	}, dig.Group("http.handlers"))

	// --- HTTP Engine ---
	_ = c.Provide(httpiface.NewEngine)

	// --- 业务手工扩展 / 覆盖 ---
	di.ProvideManual(c)
}
